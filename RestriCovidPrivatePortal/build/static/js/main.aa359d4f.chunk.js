(this.webpackJsonprestricovid=this.webpackJsonprestricovid||[]).push([[0],{18:function(t,e,n){t.exports={dImagen:"RestriCovid_dImagen__21YhM",dSubtitulo:"RestriCovid_dSubtitulo__OCTNF",dPostal:"RestriCovid_dPostal__3mhNX",btnAsignarRestriccion:"RestriCovid_btnAsignarRestriccion__3G2Yf"}},63:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),o=n(16),s=n.n(o),a=(n(46),n(18)),i=n.n(a),l=n(5),u=n.n(l),d=n(12),j=n(14),b=n.p+"static/media/RestriCovid.ab406c26.png",h=(n(48),function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://localhost:5001/RestriCovid/restricciones",e=[],t.next=4,fetch("https://localhost:5001/RestriCovid/restricciones").then((function(t){return t.json()})).then((function(t){return e=t})).catch((function(t){return console.log("error",t)}));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),f=function(){var t=Object(d.a)(u.a.mark((function t(e){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://localhost:5001/RestriCovid/restricciones/".concat(e),c=[],t.next=4,fetch(n).then((function(t){return t.json()})).then((function(t){return c=t}));case 4:return t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://localhost:5001/RestriCovid/poblaciones",e=[],t.next=4,fetch("https://localhost:5001/RestriCovid/poblaciones").then((function(t){return t.json()})).then((function(t){return e=t}));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("idRestriccion => ",e,"idPoblacion => ",n),c="https://localhost:5001/RestriCovid/deleteRestriccionPoblacion/?idRestriccion=".concat(e,"&idPoblacion=").concat(n),t.next=4,fetch(c,{method:"DELETE"}).then((function(t){console.log(t.json())})).then((function(t){return console.log("Restriccion eliminada => ",t)})).catch((function(t){return console.log(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),x=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="https://localhost:5001/RestriCovid/insertRestriccionPoblacion/?idRestriccion=".concat(n,"&idPoblacion=").concat(e),t.next=3,fetch(c,{method:"PUT"}).then((function(t){if(200===t.status)return console.log(t.json),t.json();console.log(t)})).then((function(t){return console.log("Restriccion insertada => ",t)})).catch((function(t){return console.log("Error",t)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),v=n(66),O=n(2),g=function(t){return Object(O.jsx)("button",{onClick:function(){return m(t.datosRestriccion.id,t.datosPoblacion.id)},children:t.texto})},R=n(40),w=function(t){var e=Object(c.useState)([]),n=Object(j.a)(e,2),r=n[0],o=n[1],s=function(){var e=[];return t.datos.forEach((function(t){e.push({label:"".concat(t.abreviacion),value:t.id})})),e}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"col-12 text-center",children:[Object(O.jsx)(R.a,{isMulti:!0,options:s,defaultValue:r,onChange:function(t){return o(t)},className:"m-auto col-4",placeholder:"Elige las restricciones que quieras asignar"}),Object(O.jsx)("button",{onClick:function(){return e=t.poblacion.id,void(0!==(n=r).length&&n.forEach((function(t){console.log(" id poblacion =>",e," id restriccion ",t.value),x(e,t.value)})));var e,n},className:"".concat(i.a.btnAsignarRestriccion),children:"Asignar restriccion"})]})})},C=function(){var t=Object(c.useState)({value:"20100",id:1}),e=Object(j.a)(t,2),n=e[0],r=(e[1],Object(c.useState)(null)),o=Object(j.a)(r,2),s=o[0],a=o[1],l=Object(c.useState)([]),m=Object(j.a)(l,2),x=m[0],R=m[1],C=Object(c.useState)(!1),k=Object(j.a)(C,2),N=k[0],P=k[1],y=Object(c.useState)([]),_=Object(j.a)(y,2),E=_[0],S=_[1],F=Object(c.useState)([]),A=Object(j.a)(F,2),I=A[0],q=A[1],L=function(t){return!(!/[0-9]{5}/.test(t)||!1!==/[^0-9]/.test(t))},M=function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==L(e)){t.next=4;break}a(!1),t.next=19;break;case 4:return t.next=6,f(e);case 6:return t.next=8,t.sent.length;case 8:if(t.t0=t.sent,0===t.t0){t.next=18;break}return a(!0),t.t1=R,t.next=14,f(e);case 14:t.t2=t.sent,(0,t.t1)(t.t2),t.next=19;break;case 18:a(void 0);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:void 0!==(e=t.sent)&&q(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:void 0!==(e=t.sent)&&S(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function V(t){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"".concat(i.a.dImagen," col-xl-3 col-lg-4 col-md-5 col-sm-6 col-8"),children:Object(O.jsx)("img",{src:b,alt:"Logo RestriCovid"})}),Object(O.jsx)("div",{className:"".concat(i.a.dSubtitulo," col-xl-3 col-lg-4 col-md-5 col-sm-6 col-8"),children:Object(O.jsx)("h3",{children:"Portal privado"})})]})}function Y(t){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"m-auto col-6 text-center col-xl-5 col-lg-6 col-md-7 col-sm-9 col-12",children:Object(O.jsx)("ul",{className:"list-group",children:t.datosRestricciones.map((function(t){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("li",{className:"list-group-item list-group-item-action list-group-item-light mt-2",children:[" ".concat(t.id," :  ").concat(t.abreviacion," ")," ",Object(O.jsx)(g,{datosRestriccion:t,datosPoblaciones:n,texto:"Eliminar restricci\xf3n"})]})})}))})})})}return Object(c.useEffect)((function(){M(n.value),T(),0===E.length&&J()})),Object(c.useEffect)((function(){x!==[]&&0!==x.length&&P(!0)}),[x]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"mb-5",children:Object(O.jsx)(V,{})}),!0===N&&!0===s?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"mt-8 m-auto col-6 text-center col-xl-5 col-lg-6 col-md-7 col-sm-9 col-12",children:Object(O.jsx)(v.a,{type:"success",message:"Restricciones cargadas correctamente"})}),Object(O.jsx)("div",{className:"mb-5 mt-3",children:Object(O.jsx)(Y,{datosRestricciones:x})})]}):!1===s?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"mt-2mt-2 m-auto col-6 text-center col-xl-5 col-lg-6 col-md-7 col-sm-9 col-12",children:Object(O.jsx)(v.a,{type:"error",message:"Por favor, introduce el formato de codigo postal correcto ('12345' por ejemplo)"})})}):void 0===s?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"mt-2 m-auto col-6 text-center col-xl-5 col-lg-6 col-md-7 col-sm-9 col-12",children:Object(O.jsx)(v.a,{type:"error",message:"Lo siento, ha ocurrido un error al intentar obtener los datos, por favor, asegurese de que est\xe1\r introduciendo un c\xf3digo postal de la regi\xf3n del Pa\xeds Vasco"})})}):null,Object(O.jsx)("div",{children:Object(O.jsx)(w,{datos:I,poblacion:n})})]})};s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(C,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.aa359d4f.chunk.js.map